<div class="container mt-5">
  <h2 class="mb-4">Registro de Empleados</h2>

  <!-- Checkbox para alternar entre empleados activos e inactivos -->
  <div class="form-check form-switch mb-4">
    <input class="form-check-input" type="checkbox" id="toggleInactive" (change)="toggleEmployeeList()"
      [checked]="showInactive">
    <label class="form-check-label" for="toggleInactive">
      {{ showInactive ? 'Empleados Activos' : 'Empleados Inactivos' }}
    </label>
  </div>

  <!-- Botón de agregar empleado -->
  <div class="mb-3 text-end">
    <button *ngIf="!showInactive" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addEmployeeModal">
      Agregar </button>
  </div>

  <!-- Tabla de empleados -->
  <div class="table-responsive">
    <table class="table table-striped table-bordered shadow-sm">
      <thead class="table-secondary">
        <tr>
          <th>ID</th>
          <th>DNI</th>
          <th>Nombres</th>
          <th>Apellido Paterno</th>
          <th>Apellido Materno</th>
          <th>Codigo</th>
          <th>Estado</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <!-- Iterar sobre la lista de empleados -->
        <tr *ngFor="let employee of (showInactive ? employeesInactive : employeesActive)">
          <td>{{ employee.id }}</td>
          <td>{{ employee.dni }}</td>
          <td>{{ employee.nombres }}</td>
          <td>{{ employee.apellidoPaterno }}</td>
          <td>{{ employee.apellidoMaterno }}</td>
          <td>{{ employee.codVerifica }}</td>
          <td>{{ employee.status }}</td>
          <td>

            <!--Botón de restaurar para registros inactivos -->
            <button *ngIf="showInactive" class="btn btn-sm" data-bs-toggle="tooltip" title="Restaurar"
              (click)="reactivateEmployee(employee.id)">
              <img src="https://img.icons8.com/?size=100&id=50827&format=png&color=40C057" alt="Restaurar"
                style="width: 20px; height: 20px;">
            </button>

            <!--Botones de editar y eliminar para registros activos -->
            <ng-container *ngIf="!showInactive">
              <button class="btn btn-sm" data-bs-toggle="modal" data-bs-target="#editEmployeeModal" (click)="dataEmployee(employee)">
                <img src="https://img.icons8.com/?size=100&id=H5dKJanZkZNk&format=png&color=228BE6" alt="Editar"
                  style="width: 20px; height: 20px;">
              </button>
              <button class="btn btn-sm" data-bs-toggle="tooltip" data-bs-placement="top" title="Eliminar"
                (click)="deactivateEmployee(employee.id)">
                <img src="https://img.icons8.com/?size=100&id=FgOBVsURv5ar&format=png&color=FA5252" alt="Eliminar"
                  style="width: 20px; height: 20px;">
              </button>
            </ng-container>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<!-- Modal para agregar nuevo empleado -->
<div class="modal fade" id="addEmployeeModal" tabindex="-1" aria-labelledby="addEmployeeModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="addEmployeeModalLabel">Buscar e Insertar Empleado</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form>
          <div class="mb-3">
            <label for="employeeDNI" class="form-label">DNI</label>
            <input type="text" class="form-control" id="employeeDNI" name="dni" [(ngModel)]="dni" required>
          </div>
          <div class="text-end">
            <button type="submit" class="btn btn-primary" (click)="addEmployeeByDni(dni)">Guardar</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- Modal para editar un empleado -->
<div class="modal fade" id="editEmployeeModal" tabindex="-1" aria-labelledby="editEmployeeModalLabel"
  aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="editEmployeeModalLabel">Editar Empleado</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form>
          <div class="mb-3">
            <label for="employeeDni" class="form-label">DNI</label>
            <input type="number" class="form-control" [(ngModel)]="employeeToEdit.dni" name="Dni" required>
          </div>
          <div class="mb-3">
            <label for="employeeNames" class="form-label">Nombres</label>
            <input type="text" class="form-control" [(ngModel)]="employeeToEdit.nombres" name="Names" readonly>
          </div>
          <div class="mb-3">
            <label for="employeeApellidoP" class="form-label">Apellido Paterno</label>
            <input type="text" class="form-control" [(ngModel)]="employeeToEdit.apellidoPaterno" name="ApellidoP" readonly>
          </div>
          <div class="mb-3">
            <label for="employeeApellidoM" class="form-label">Apellido Materno</label>
            <input type="text" class="form-control" [(ngModel)]="employeeToEdit.apellidoMaterno" name="ApellidoM" readonly>
          </div>
          <div class="mb-3 text-end">
            <button type="submit" class="btn btn-primary" (click)="updateEmployee(employeeToEdit.id, employeeToEdit.dni)">Guardar</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>